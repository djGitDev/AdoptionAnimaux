
{% extends 'base.html' %} {% block content %}
<div class="container mt-3">
    <div class="card">
        <div class="card-header">
              <h2>Mise en adoption<h2>            
        </div>
        <div class="card-body">

            {% if errors %}
                <h4>Erreurs dans le formulaire</h4>
                <ul>
                    {% for error in errors %}
                        <li style="color: red;">{{error}}</li>
                    {% endfor %}
                </ul>
            {% endif %}

            <form class = "needs-validation" novalidate action="/envoyer" method="POST" >
                <div class="row ">        
                    <div  class="col-md-6" >
                        <label for="nom" class="form-label">Nom de l'animal</label>
                        <input type="text" class="form-control" name="nom"id="nom" value="{{animal['nom']}}" required minlength="3" maxlength="20">
                        <div  id="erreur_nom" class="invalid-feedback" style="display: none;">Le nom de l'animal doit avoir entre 3 et 20 caractères.</div>
                        <div id="valid_nom" class="valid-feedback" style="display: none;"> Champ valid!</div>
                    </div>
                    <div class="col-md-6 ">
                        <label for="age" class="form-label">Âge </label>
                        <input type="number" class="form-control" name="age" id="age"  min="0" max="30" required value="{{animal['age']}}" >
                        <div  id="erreur_age" class="invalid-feedback" style="display: none;">L'age de l'animal n'est pas valide.</div>
                        <div id="valid_age" class="valid-feedback" style="display: none;"> Champ valid!</div>
                    </div>
                </div>
                <div class="row">        
                    <div class="col-md-6">
                        <label for="espece" class="form-label">Espece de l'animal</label>
                        <input type="text" class="form-control" name="espece" id="espece" required value="{{animal['espece']}}" >
                        <div  id="erreur_espece" class="invalid-feedback" style="display: none;"></div>
                        <div id="valid_espece" class="valid-feedback" style="display: none;"> Champ valid!</div>
                    </div>
                    <div class="col-md-6">
                        <label for="race" class="form-label">Race de l'animal</label>
                        <input type="text" class="form-control" name="race" id="race" required value="{{animal['race']}}" >
                        <div  id="erreur_race" class="invalid-feedback" style="display: none;"></div>
                        <div id="valid_race" class="valid-feedback" style="display: none;"> Champ valid!</div>
                    </div>
                </div>
                <hr>
                <div class="row">        
                    <div class="col-md-6">
                        <label for="email" class="form-label">Adresse Email</label>
                        <input type="text" class="form-control" name="courriel" id="email" value="{{ animal['courriel']}}" 
                            required pattern="^([A-Za-z0-9]+[.-_])*[A-Za-z0-9]+@[A-Za-z0-9-]+(\.[A-Z|a-z]{2,})+$">
                        <div  id="erreur_email" class="invalid-feedback" style="display: none;">L'adresse e-mail n'est pas valide.</div>
                        <div id="valid_email" class="valid-feedback" style="display: none;"> Champ valid!</div>
                    </div>
                </div>
                <hr>
                <div class="row">        
                    <div class="col-md-12">
                        <label for="adresse" class="form-label">Adresse Civique</label>
                        <input type="text" class="form-control" name="adresse" id="adresse" required value="{{animal['adresse']}}">
                        <div  id="erreur_adresse" class="invalid-feedback" style="display: none;"></div>
                        <div id="valid_adresse" class="valid-feedback" style="display: none;"> Champ valid!</div>
                    </div>
                </div>
                <div class="row">   
                    <div class="col-md-6">
                        <label for="ville" class="form-label">Ville</label>
                        <input type="text" class="form-control" name="ville" id="ville" required value="{{animal['ville']}}">
                        <div  id="erreur_ville" class="invalid-feedback" style="display: none;"></div>
                        <div id="valid_ville" class="valid-feedback" style="display: none;"> Champ valid!</div>
                    </div>   
                    <div class="col-md-6">
                        <label for="codePostal" class="form-label">Code Postal </label>
                        <input type="text" class="form-control" name="cp" id="codePostal" value="{{animal['cp']}}" 
                            required pattern="^[A-Za-z][0-9][A-Za-z] [0-9][A-Za-z][0-9]$">
                        <div  id="erreur_code_postal" class="invalid-feedback" style="display: none;">Le code postal n'est pas valide, exemple (1w1 9t5).</div>
                        <div id="valid_code_postal" class="valid-feedback" style="display: none;"> Champ valid!</div>
                    </div>  
                </div>
                <hr>
                <div class="row">        
                    <div class="col-md-12">
                        <label for="description" class="form-label">Description</label>
                        <textarea class="form-control" name="description" id="description" rows="3" required >{{animal['description']}}</textarea>
                        <div  id="erreur_age" class="invalid-feedback" style="display: none;">L'age de l'animal n'est pas valide.</div>
                        <div id="valid_age" class="valid-feedback" style="display: none;"> Champ valid!</div>
                    </div>
                </div>
                <hr>
                <div style="display: flex; justify-content: end; gap: 10px;">
                    <button type="submit" class="btn btn-primary">Soumettre a l'adoption</button>
                    <a href="/" class="btn btn-outline-danger" >Annuler</a>
                </div>
            </form>

            <!-- <button type="button" class="btn btn-primary" id="liveToastBtn">Show live toast</button> -->

            <div class="toast-container position-fixed top-0 end-0 p-3">

                <div id="liveToast" class= "toast" role="alert" aria-live="assertive" aria-atomic="true" style="background-color: green;">
                    <div class="toast-header">
                    <strong class="me-auto">Bootstrap</strong>
                  
                    <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
                    </div>
                    <div class="toast-body">
                    Hello, world! This is a toast message.
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    var champs = document.querySelectorAll('input, textarea');

    champs.forEach(function(champ) {
        champ.addEventListener('input', function(event) {
            if (event.target.value.includes(',')) {
                event.target.value = event.target.value.replace(/,/g, ''); 
            }
        });
    });      

</script>
{% endblock %}
